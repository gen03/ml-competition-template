---
description:
globs: Dockerfile,docker-compose.yml,.devcontainer/**
alwaysApply: false
---
# Docker標準

## 1. イメージ構築
- ベースイメージは特定のバージョンを指定
- マルチステージビルドを活用
- 不要なファイルは含めない
- セキュリティアップデートを定期的に適用

## 2. 環境変数
- 機密情報は.envファイルで管理
- デフォルト値は.env.exampleで提供
- 環境変数は必要最小限に
- 環境変数の説明を文書化

## 3. ボリューム
- データは永続化ボリュームを使用
- キャッシュは適切に管理
- ボリュームのパーミッションを適切に設定
- 不要なボリュームは定期的にクリーンアップ

## 4. ネットワーク
- 必要なポートのみ公開
- ネットワークは分離して使用
- サービス間の通信は内部ネットワークで
- セキュリティグループを適切に設定

## 5. セキュリティ
- rootユーザーでの実行を避ける
- 必要なパッケージのみインストール
- セキュリティスキャンを定期的に実施
- シークレットは適切に管理

## 6. パフォーマンス
- キャッシュを効果的に活用
- レイヤー数を最小限に
- 不要なファイルは削除
- リソース制限を適切に設定

## 7. メンテナンス
- イメージのバージョン管理
- 定期的なアップデート
- ログの適切な管理
- バックアップの実施
